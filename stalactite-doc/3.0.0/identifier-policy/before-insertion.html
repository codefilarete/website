<h2 id="before-insertion">Before insertion</h2>
There are 2 type of policy before insertion:
<ul>
	<li>one maintained by a dedicated table, in which we store the identifier per entity</li>
	<li>one maintained by a database sequence</li>
</ul>
<h3 id="before-insertion-pooled-sequence">Pooled HiLo Sequence</h3>
<p>This identifier policy will ask for a memory-generated identifier just before inserting a database row. Meanwhile, the
	state of the generator is stored in a database table (one line per entity class) and pooled in memory to avoid
	too many back and forth with it. <code>PooledHighLowSequence</code>only generates <code>long</code>values.</p>
<p>Here is a default example :</p>
<pre><code class="language-java">MappingEase.entityBuilder(Car.class, long.class)
    .mapKey(Car::getId, IdentifierPolicy.pooledHiLoSequence())
    .map(Car::getModel)
</code></pre>
<p>You may require some tuning on the cache size or table name. Hereafter is a detailed example with the dedicated signature :</p>
<pre><code class="language-java">PooledHiLoSequence longSequence = new PooledHiLoSequence(
	// 50 is the pool size, &quot;mySequence&quot; is the sequence name,
	// and the default storage options are about table and column names that store the sequence
	new PooledHiLoSequenceOptions(50, &quot;mySequence&quot;, PooledHiLoSequenceStorageOptions.DEFAULT),
	persistenceContext.getDialect(),
	new TransactionalConnectionProvider(dataSource),
	persistenceContext.getJDBCBatchSize());

MappingEase.entityBuilder(Car.class, long.class)
    .mapKey(Car::getId, IdentifierPolicy.pooledHiLoSequence(longSequence))
    .map(Car::getModel)
</code></pre>

<h3 id="before-insertion-database-sequence">Database sequence</h3>
<p>This policy defines a database sequence that Stalactite will ask for the next identifier, and only generates <code>long</code>
	values.</p>
<pre><code class="language-java">MappingEase.entityBuilder(Car.class, long.class)
	.mapKey(Car::getId, IdentifierPolicy.databaseSequence())
	.map(Car::getModel)
</code></pre>
<p>As for other features, some options are available when using a slightly different signature</p>
<pre><code class="language-java">MappingEase.entityBuilder(Car.class, long.class)
	// &quot;mySequence&quot; is the sequence name, 42 is the initial sequence value, and 100 is the pool size
	.mapKey(Car::getId, IdentifierPolicy.databaseSequence("mySequence", new DatabaseSequenceSettings(42, 100))
	.map(Car::getModel)
</code></pre>